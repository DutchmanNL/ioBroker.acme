"use strict";(self.webpackChunkiobroker_admin_component_telegram=self.webpackChunkiobroker_admin_component_telegram||[]).push([["src_Components_jsx"],{99078:function(N,h,r){r.r(h),r.d(h,{default:function(){return D}});var b=r(4819),t=r.n(b),g=r(15854),a=r.n(g),v=r(58503),l=r(94427),c=r(75606),y=Object.defineProperty,C=Object.getPrototypeOf,E=Reflect.get,T=(o,s,e)=>s in o?y(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,_=(o,s,e)=>(T(o,typeof s!="symbol"?s+"":s,e),e),j=(o,s,e)=>E(C(o),e,s),u=(o,s,e)=>new Promise((n,f)=>{var O=i=>{try{d(e.next(i))}catch(p){f(p)}},P=i=>{try{d(e.throw(i))}catch(p){f(p)}},d=i=>i.done?n(i.value):Promise.resolve(i.value).then(O,P);d((e=e.apply(o,s)).next())});const x=()=>({table:{minWidth:400},header:{fontSize:16,fontWeight:"bold"},ok:{color:"#0ba20b"},warn:{color:"#f57d1d"},error:{color:"#c42c3a"}});class m extends c.ConfigGeneric{constructor(s){super(s),_(this,"onCertsChanged",(e,n)=>{e==="system.certificates"&&n&&this.readData(n).catch(()=>{})}),this.state={collections:null}}componentDidMount(){return u(this,null,function*(){j(m.prototype,this,"componentDidMount").call(this),yield this.readData(),yield this.props.socket.subscribeObject("system.certificates",this.onCertsChanged)})}readData(s){return u(this,null,function*(){var e;let n=s||(yield this.props.socket.getObject("system.certificates"));(e=n==null?void 0:n.native)!=null&&e.collections?n=n.native.collections:n={},this.setState({collections:n})})}componentWillUnmount(){return u(this,null,function*(){yield this.props.socket.unsubscribeObject("system.certificates",this.onCertsChanged)})}renderItem(){return this.state.collections?t().createElement("div",{style:{width:"100%"}},t().createElement("h4",null,c.i18n.t("custom_acme_title")),t().createElement(l.TableContainer,{component:l.Paper,style:{width:"100%"}},t().createElement(l.Table,{style:{width:"100%"},size:"small"},t().createElement(l.TableHead,null,t().createElement(l.TableRow,null,t().createElement(l.TableCell,null,c.i18n.t("custom_acme_id")),t().createElement(l.TableCell,null,c.i18n.t("custom_acme_status")),t().createElement(l.TableCell,null,c.i18n.t("custom_acme_domains")),t().createElement(l.TableCell,null,c.i18n.t("custom_acme_staging")),t().createElement(l.TableCell,null,c.i18n.t("custom_acme_expires")),t().createElement(l.TableCell,null))),t().createElement(l.TableBody,null,Object.keys(this.state.collections).map(s=>{const e=this.state.collections[s];let n;return new Date(e.expires).getTime()>Date.now()&&!e.staging?n=t().createElement("span",{className:this.props.classes.ok},"OK"):new Date(e.expires).getTime()<=Date.now()?n=t().createElement("span",{className:this.props.classes.error},c.i18n.t("custom_acme_expired")):e.staging&&(n=t().createElement("span",{className:this.props.classes.warn},c.i18n.t("custom_acme_staging"))),t().createElement(l.TableRow,{key:s,sx:{"&:last-child td, &:last-child th":{border:0}}},t().createElement(l.TableCell,{component:"th",scope:"row"},s),t().createElement(l.TableCell,null,n),t().createElement(l.TableCell,null,e.domains.join(", ")),t().createElement(l.TableCell,{className:e.staging?this.props.classes.warn:""},e.staging?"\u2713":""),t().createElement(l.TableCell,{className:new Date(e.expires).getTime()>Date.now()?this.props.classes.error:""},new Date(e.tsExpires).toLocaleString()))}))))):t().createElement(l.LinearProgress,null)}}m.propTypes={socket:a().object.isRequired,themeType:a().string,themeName:a().string,style:a().object,className:a().string,data:a().object.isRequired,attr:a().string,schema:a().object,onError:a().func,onChange:a().func};var w=(0,v.withStyles)(x)(m),D={AcmeComponent:w}}}]);

//# sourceMappingURL=src_Components_jsx.0f0a7048.chunk.js.map